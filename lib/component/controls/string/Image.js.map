{"version":3,"sources":["component/controls/string/Image.js"],"names":["Image","shouldComponentUpdate","nextProps","props","render","schema","value","name","actions","meta","title","description","pending","touched","error","invalid","message","className","maxWidth","file","upload","change","stopPending","propTypes","object","isRequired","string","type","media","test"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAYqBA,K;;;;;;;;;wBAEjBC,qB,kCAAsBC,S,EAAW;AAC7B,mBAAO,CAAC,+BAAaA,SAAb,EAAwB,KAAKC,KAA7B,CAAR;AACH,S;;wBAEDC,M,qBAAS;AAAA,yBAQD,KAAKD,KARJ;AAAA,gBAGDE,MAHC,UAGDA,MAHC;AAAA,gBAIDC,KAJC,UAIDA,KAJC;AAAA,gBAKDC,IALC,UAKDA,IALC;AAAA,gBAMDC,OANC,UAMDA,OANC;AAAA,gBAODC,IAPC,UAODA,IAPC;AAAA,gBAWDC,KAXC,GAaDL,MAbC,CAWDK,KAXC;AAAA,gBAYDC,WAZC,GAaDN,MAbC,CAYDM,WAZC;AAAA,gBAgBDC,OAhBC,GAmBDH,IAnBC,CAgBDG,OAhBC;AAAA,gBAiBDC,OAjBC,GAmBDJ,IAnBC,CAiBDI,OAjBC;AAAA,gBAkBDC,KAlBC,GAmBDL,IAnBC,CAkBDK,KAlBC;;;AAqBL,gBAAMC,UAAUF,WAAWC,KAAX,IAAoBA,MAAME,OAA1C;;AAEA,gBAAMC,YAAY,uCACd,kBADc,EAEd,KAAKd,KAFS,CAAlB;;AAKA,mBACI;AAAA;AAAA,kBAAK,WAAWc,SAAhB;AAEQP,wBACM;AAAA;AAAA;AACE,mCAAU,wBADZ;AAEGA;AAFH,iBADN,GAKM,IAPd;AAUQC,8BACM;AAAA;AAAA;AACE,mCAAU,6BADZ;AAEGA;AAFH,iBADN,GAKM,IAfd;AAiBI;AACI,0BAAK,KADT;AAEI,8BAAU,CAAC,OAAD,CAFd;AAGI,2BAAO,EAACO,UAAU,MAAX,EAHX;AAII,4BAAQ,EAACH,gBAAD,EAJZ;AAKI,+BAAWH,OALf;AAMI,kCAAc;AAAA,+BAASO,OAAOX,QAAQY,MAAR,CAAeb,IAAf,EAAqBY,IAArB,CAAP,GAAoCX,QAAQa,MAAR,CAAed,IAAf,EAAqB,EAArB,CAA7C;AAAA,qBANlB;AAOI,oCAAgB;AAAA,+BAAMC,QAAQc,WAAR,CAAoBf,IAApB,CAAN;AAAA,qBAPpB;AAQI,2BAAOD,KARX,GAjBJ;AA0BI,6EAAmBG,IAAnB;AA1BJ,aADJ;AA+BH,S;;;;;yBAjEgBT,K;;;AAqErBA,UAAMuB,SAAN,GAAkB;AACdlB,gBAAQ,iBAAUmB,MAAV,CAAiBC,UADX;AAEdnB,eAAO,iBAAUoB;AAFH,KAAlB;;AAKA,kCAAgB,UAAUrB,MAAV,EAAkB;;AAE9B,YACIA,OAAOsB,IAAP,KAAgB,QAAhB,IACGtB,OAAOuB,KADV,IAEG,WAAWC,IAAX,CAAgBxB,OAAOuB,KAAP,CAAaD,IAA7B,CAHP,EAIE;AACE,mBAAO3B,KAAP;AACH;AAEJ,KAVD","file":"Image.js","sourcesContent":["/**\n * @file Image\n * @author leon <ludafa@outlook.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\nimport Uploader from 'melon/Uploader';\nimport shallowEqual from 'melon-core/util/shallowEqual';\nimport {registerControl} from '../../../factory';\nimport ValidityLabel from '../../ValidityLabel';\nimport createStateClassName from '../../../util/createStateClassName';\n\nexport default class Image extends Component {\n\n    shouldComponentUpdate(nextProps) {\n        return !shallowEqual(nextProps, this.props);\n    }\n\n    render() {\n\n        const {\n            schema,\n            value,\n            name,\n            actions,\n            meta\n        } = this.props;\n\n        const {\n            title,\n            description\n        } = schema;\n\n        const {\n            pending,\n            touched,\n            error\n        } = meta;\n\n        const invalid = touched && error && error.message;\n\n        const className = createStateClassName(\n            'ui-control-image',\n            this.props\n        );\n\n        return (\n            <div className={className}>\n                {\n                    title\n                        ? <header\n                            className=\"ui-control-image-title\">\n                            {title}\n                        </header>\n                        : null\n                }\n                {\n                    description\n                        ? <p\n                            className=\"ui-control-image-decription\">\n                            {description}\n                        </p>\n                        : null\n                }\n                <Uploader\n                    size=\"xxs\"\n                    variants={['fluid']}\n                    style={{maxWidth: '100%'}}\n                    states={{invalid}}\n                    uploading={pending}\n                    onFileChange={file => (file ? actions.upload(name, file) : actions.change(name, ''))}\n                    onUploadCancel={() => actions.stopPending(name)}\n                    value={value} />\n                <ValidityLabel {...meta} />\n            </div>\n        );\n\n    }\n\n}\n\nImage.propTypes = {\n    schema: PropTypes.object.isRequired,\n    value: PropTypes.string\n};\n\nregisterControl(function (schema) {\n\n    if (\n        schema.type === 'string'\n        && schema.media\n        && /^image\\//.test(schema.media.type)\n    ) {\n        return Image;\n    }\n\n});\n"]}